<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interactive Hate Speech Taxonomy Editor</title>
<link rel="stylesheet" href="style.css">
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<!-- ====== Header / Controls ====== -->
<header>
  <h2>Interactive Hate Speech Taxonomy</h2>
  <select id="taxonomySelector">
    <option value="merged">Merged Taxonomy</option>
    <option value="platform">Platform Policy Taxonomy</option>
    <option value="country">Country Regulation Taxonomy</option>
    <option value="dataset">Research Dataset Taxonomy</option>
  </select>
  <button id="refreshBtn">Refresh</button>
  <button id="togglePanelBtn">Hide Panel</button>
  <input type="text" id="platformSearch" placeholder="Search node...">
  <button id="searchBtn">Search</button>
  <button id="clearSearchBtn">Expand Tree</button>
  <button id="toggleFullscreenBtn">Full Screen</button>
</header>

<!-- Breadcrumb -->
<div id="breadcrumb"></div>

<!-- ====== Main Container ====== -->
<div class="container">
  <!-- Left: Tree -->
  <div class="left" id="treeContainer">
    <svg id="tree"></svg>
  </div>

  <!-- Right: Panel -->
  <div class="panel">
    <h3 id="panelTitle">Select a node</h3>
    <div class="meta" id="panelMeta">Depth: — • Children: —</div>
    <label>Definition:</label>
    <textarea id="panelDef"></textarea>

    <!-- Node Editor -->
    <div class="panel-section" id="nodeEditorSection">
      <h4 class="panel-header">Add / Update Node ►</h4>
      <div class="panel-content">
        <label>Node Name:</label>
        <input type="text" id="newNodeName" placeholder="Node name">
        <label>Node Description:</label>
        <textarea id="newNodeDesc" placeholder="Node description"></textarea>
        <button id="addNodeBtn">Add Node</button>
        <button id="updateNodeBtn">Update Node</button>
        <button id="deleteNodeBtn">Delete Node</button>
      </div>
    </div>

    <!-- Tree Controls -->
    <div class="panel-section" id="treeControlsSection">
      <h4 class="panel-header">Tree Controls ►</h4>
      <div class="panel-content">
        <button id="expandAllBtn">Expand All</button>
        <button id="collapseAllBtn">Collapse All</button>
        <button id="toggleRadialBtn">Toggle Radial</button>
        <br><br>
        <label>Level to Expand:</label>
        <input type="number" id="expandLevelInput" min="0" placeholder="Enter level">
        <button id="expandLevelBtn">Expand Level</button>
        <br>
        <label>Level to Collapse:</label>
        <input type="number" id="collapseLevelInput" min="0" placeholder="Enter level">
        <button id="collapseLevelBtn">Collapse Level</button>
      </div>
    </div>

    <!-- Export / Import -->
    <div class="panel-section" id="exportImportSection">
      <h4 class="panel-header">Export / Import ►</h4>
      <div class="panel-content">
        <button id="exportJsonBtn">Export JSON</button>
        <button id="exportPngBtn">Export PNG</button>
        <input type="file" id="importJsonInput" accept="application/json">
      </div>
    </div>
  </div>
</div>

<!-- Profile Popup -->
<div id="profilePopup">
  <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom: 10px;">
    <span style="font-weight:bold;">Profile</span>
    <div>
      <button id="minimizeProfilePopup">_</button>
      <button id="closeProfilePopup">✖</button>
    </div>
  </div>
  <h3 id="profileTitle"></h3>
  <span id="profileTaxonomyBadge" style="font-size:12px; color:#555;"></span>
  <div id="profileContent"></div>
  <button id="downloadProfileTxt">Download TXT</button>
  <button id="downloadProfilePdf">Download PDF</button>
</div>

<script src="script.js"></script>
</body>
</html>
